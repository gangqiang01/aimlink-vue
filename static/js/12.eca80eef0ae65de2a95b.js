webpackJsonp([12],{YMDM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Y4q1"),s=i("y6A+"),l=i("yHTr"),n={name:"deviceAdd",data:function(){return{deviceData:[],deviceList:[],multipleTable:[],addLoading:!1,groupOptions:[],dialogFormVisible:!1,limit:10,dataCount:null,currentPage:1,isshow:!1,form:{selectGroup:""},deviceKeyword:""}},methods:{getUnassignedDevices:function(){var e=this;_g.openGlobalLoading(),Object(a.d)(this.deviceKeyword).then(function(t){Object(l.a)(t,function(t){e.deviceData=t.devices,e.dataCount=t.devices.length,e.dataCount>0?(e.deviceList=t.devices.slice(0,e.limit),e.isshow=e.dataCount>e.limit):console.log("unassigndevicecount is null")})})},handleSelectionChange:function(e){this.multipleTable=e},getDeviceGroup:function(){var e=this;Object(s.c)(this).then(function(t){Object(l.a)(t,function(t){var i=t.accounts[0].groups;if(console.log(i),0!=i.length){var a=[];i.forEach(function(e){a.push({value:e.gid,label:e.name})}),e.selectValue=i[0].gid,e.groupOptions=a}else e.groupOptions=[]})})},addDevice:function(){this.dialogFormVisible=!1,0!=this.multipleTable.length?Object(a.a)(this.multipleTable,this.form.selectGroup).then(function(e){Object(l.a)(e,function(e){e.result&&swal("","Add device successfully","success").then(function(e){e&&router.replace({name:"deviceList"})})})}):swal("","Please select device","warning")},handleCurrentChange:function(e){this.currentPage=e,this.deviceList=this.deviceData.slice((e-1)*this.limit,e*this.limit)}},created:function(){this.getUnassignedDevices(),this.getDeviceGroup()}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),e._v(" "),i("div",{staticClass:"m-t-20"},[i("div",{staticClass:"panel-header"},[e._v("\n            All Unassigned Devices\n            "),i("div",{staticClass:"fr m-r-10"},[i("el-input",{staticClass:"w-300 m-l-10",attrs:{size:"small",placeholder:"Keyword of device name"},model:{value:e.deviceKeyword,callback:function(t){e.deviceKeyword=t},expression:"deviceKeyword"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUnassignedDevices},slot:"append"})],1)],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection","min-width":"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"Device Name","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"agentId",label:"Agent ID","min-width":"120"}})],1),e._v(" "),i("div",{staticClass:"m-t-10 cf"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.isshow,expression:"isshow"}],staticClass:"fr",attrs:{layout:"prev, pager, next","page-size":e.limit,"current-page":e.currentPage,total:e.dataCount,background:""},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),i("div",{staticClass:"m-t-10 cf"},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.addLoading,expression:"addLoading"}],staticClass:"m-t-10 fr",attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("Add")]),e._v(" "),i("el-dialog",{attrs:{title:"Select device group you want to add",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.form}},[i("span",{staticClass:"m-r-10"},[e._v("Device Group:")]),e._v(" "),i("el-select",{model:{value:e.form.selectGroup,callback:function(t){e.$set(e.form,"selectGroup",t)},expression:"form.selectGroup"}},e._l(e.groupOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addDevice}},[e._v("确 定")])],1)],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-t-10 "},[t("p",{staticClass:"header-line"},[t("i",{staticClass:"fa fa-plus-square-o c-primary m-r-10"}),this._v(" Add Device\n        ")])])}]},c=i("C7Lr")(n,o,!1,null,null,null);t.default=c.exports}});
//# sourceMappingURL=12.eca80eef0ae65de2a95b.js.map