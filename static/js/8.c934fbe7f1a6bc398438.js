webpackJsonp([8],{AbSV:function(e,t){},NewS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("4YfN"),a=i.n(n),l=i("Y4q1"),s=i("y6A+"),c=i("yHTr"),o=i("9rMa"),d={name:"deviceList",data:function(){return{groupOptions:[],selectValue:"",deviceTableData:[],deviceList:[],isconnect:!1,online:"fa fa-child fa-x c-success",offline:"fa fa-minus-circle fa-x c-danger",multipleTable:[],limit:10,dataCount:null,currentPage:1,isshow:!1,addLoading:!1,deleteLoading:!1,deviceKeyword:""}},methods:{getDeviceGroup:function(){var e=this;Object(s.c)(this).then(function(t){Object(c.a)(t,function(t){var i=t.accounts[0].groups;if(console.log(i),0!=i.length){var n=[];i.forEach(function(e){n.push({value:e.gid,label:e.name})}),e.selectValue=i[0].gid,e.groupOptions=n,e.getAllDevices()}else e.groupOptions=[],e.getAllDevices()})})},getAllDevices:function(){var e=this;_g.openGlobalLoading(),Object(l.c)(this.selectValue,this.deviceKeyword).then(function(t){Object(c.a)(t,function(t){e.deviceTableData=t.groups[0].devices,e.dataCount=e.deviceTableData.length,e.deviceList=e.deviceTableData.slice(0,e.limit),e.isshow=e.dataCount>e.limit,console.log(e.deviceList)})})},confirmDelete:function(e){var t=this;console.log("rowdata:",e);var i={devices:[]};i.devices[0]={did:e.did,groupIds:[]},swal({title:"Are you sure?",text:"delete this device",icon:"warning",buttons:!0,dangerMode:!0}).then(function(i){i&&Object(l.b)(e).then(function(e){Object(c.a)(e,function(e){e.result&&swal("","Delete successfully","success").then(function(){t.getAllDevices()})})})})},handleSelectionChange:function(e){this.multipleTable=e},handleCurrentChange:function(e){this.currentPage=e,this.deviceList=this.deviceTableData.slice((e-1)*this.limit,e*this.limit)},deleteDevice:function(){var e=this;this.multipleTable?(this.deleteLoading=!this.deleteLoading,swal({title:"Are you sure?",text:"delete this device",icon:"warning",buttons:!0,dangerMode:!0}).then(function(t){e.deleteLoading=!e.deleteLoading,t&&Object(l.b)(e.multipleTable).then(function(t){Object(c.a)(t,function(t){t.result&&swal("","Delete successfully","success").then(function(){e.getAllDevices()})})})})):swal("","Please selected data","info")},addDevice:function(){router.replace({name:"deviceAdd",params:{groupOptions:this.groupOptions}})}},created:function(){this.getDeviceGroup()},computed:a()({},Object(o.b)({connectStatus:"connectStatus"})),watch:{connectStatus:function(e){e&&this.getAllDevices()},selectValue:function(){this.getAllDevices()}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"m-t-10 "},[i("p",{staticClass:"header-line"},[i("i",{staticClass:"fa fa-server c-blue m-r-10",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("device.deviceList")))])]),e._v(" "),i("div",{staticClass:"m-t-20"},[i("div",{staticClass:"panel-header"},[e._v("\n            Device Group:\n            "),i("el-select",{attrs:{size:"small"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.groupOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("div",{staticClass:"fr m-r-10"},[i("el-input",{staticClass:"w-300 m-l-10",attrs:{size:"small",placeholder:"Keyword of device name"},model:{value:e.deviceKeyword,callback:function(t){e.deviceKeyword=t},expression:"deviceKeyword"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAllDevices},slot:"append"})],1)],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection","min-width":"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"Device Name","min-width":"120",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"agentid",label:"Agent ID","min-width":"120",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"version",label:"Agent Version","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"Status","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{class:[t.row.connected?e.online:e.offline]}),e._v(" "),i("span",[e._v(e._s(t.row.connected?"online":"offline"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"Action","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("span",[i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){e.confirmDelete(t.row)}}},[e._v("Delete")])],1)])]}}])})],1),e._v(" "),i("div",{staticClass:"m-t-10 cf"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":e.limit,"current-page":e.currentPage,total:e.dataCount,background:""},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),i("div",{staticClass:"m-t-10 fr"},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.addLoading,expression:"addLoading"}],attrs:{size:"small",type:"primary"},on:{click:function(t){e.addDevice()}}},[e._v("Add")]),e._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.deleteLoading,expression:"deleteLoading"}],attrs:{size:"small",type:"primary"},on:{click:function(t){e.deleteDevice()}}},[e._v("Delete")])],1)],1)])},staticRenderFns:[]};var u=i("C7Lr")(d,r,!1,function(e){i("AbSV")},"data-v-67605926",null);t.default=u.exports}});
//# sourceMappingURL=8.c934fbe7f1a6bc398438.js.map