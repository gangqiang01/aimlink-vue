webpackJsonp([4],{CoUN:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAEMElEQVR42u2cv0tbURTHH7SUttSlnQrpUkqg0j/AdioukrYiIi7i0GoHEV1Ka5vBCqIgLl0CIuJgScWpJdZNJ8FVFAQVQWJVUBt/G6028fR+b/LkGX3Jk2jeven5wpeE5CZ6Pzn3fs8L5BoGi8VisVgsfXVd2CP8VNgn/DJHfi58T3d4t4XfCP8QXhCOCVOOHBFuEb6rc+V9EV7NIbRU/05CvKUjQL/wHxfhmY4mIWqlR8JrCsCzGhBv6gLwXfKTzzWkJeG/Ns/tJyFqESxfcxwYprFtDOZDsAy6tExfCT8U/q57sLgJELqfAaLyweI2QCNZiYNp9kSlg0UFgNCTDBCVDRZVAFohahUsKgE0dAwW1QBqFywqAtQqWFQFqE2wqAxQi2BRHaDywaIDQKWDRReAygaLTgCdBst7BphdsPxkgNkFCwPMMlj+C4BXaQbIABkgA2SADJABMkAGyAAZIANkgAyQATJABsgA4YKCAhofHycoHo9TV1eX7djW1lY6PDykVEWjUfketbW1545fWlqi4uLiM+9XWFhIExMTdHx8TJOTk3oCrKqqoo2NjRMYU1NTEupFAJrCcz09PY4A4m8MDw9LeOFwmHw+n54Ae3t75SQAbnt7m3Z3d6m+vj4tQCsQj8dDjY2NNDs7KyFGIhEqLy9PCxDwgsEgxWIxWlxczARPXYBer5dmZmbo6OiIOjs75TIEzP7+fscATVdUVNDa2pp8vq2tLe34vr4+CW91dZVqamr03QNRaai4lZUVWQXY/7APzs3NSbgXAYiqmp6elh9Ad3e37fj29nY6ODigzc1Nqqur0ztEBgYG5LIbGRk5tR/u7e1RQ0PDhQCar93f36empqZzx7e0tNDOzo407mudwqgwVBomiImmJnIoFHIEEEna3NxMy8vL8nXz8/NUVFR0Zrzf75dVh+pDFWrfxqBKUC1IQHPCcCAQkMs49XEnKby+vn5qWZrj8Tj2R+iCS1ddgENDQ3JCuLU+XllZKSeMSkHVZAKIPQ/pjZakpKTEdvzW1hYtLCzI+6jW6upqfQGislBhmWTujU4bY7slby5bBBXaFshh+6ImwExL0ZSZztkCtI4vKys7gYirD+yh2gEcHR21DQoY0AAP/WFHR8elAoSxB2IvxPLH0re78lESoAnH2m6kg4zbywZo7QfRUKOx1gYgKgqVZdcsp47D1UJpaemlA7RekThobdQBODY2JisLTbSTSkVLg9bmKgBav1DAkubvA/kLVQbIABkgA2SADJABZqVvwvE8gocjXIK5BPjRSPy6J18AYi4fcgnwsZH4tWO+AMRcvEaO9Vn4MA/g4QC1T4YLuiEcMNw9/i5brxiJI/yuGS7pjvBb4ZDwL02CBYERNhKHRr42EodIuiocxPhA+JnwCyPxezaV/SL5v3rcrDwWi8VisVjZ6h9lpiy/oN5I5gAAAABJRU5ErkJggg=="},HYrE:function(e,a){},KBiF:function(e,a,t){"use strict";t.d(a,"b",function(){return i}),t.d(a,"d",function(){return l}),t.d(a,"a",function(){return o}),t.d(a,"c",function(){return r});var n=t("rVsN"),p=t.n(n),s=t("IxEa"),i=function(e,a,t,n){return new p.a(function(p,i){var l={agentId:t,plugin:n,sensorId:a,_:Date.parse(new Date)},o="rmm/v1/devicectrl/"+e+"/data";Object(s.b)(o,l).then(function(e){p(e)}).catch(function(e){p(e.response)})})},l=function(e,a,t,n){return new p.a(function(p,i){var l={agentId:t,plugin:n,sensorIds:["string"==typeof a?{n:e,sv:a}:{n:e,bv:a}]};Object(s.c)("rmm/v1/devicectrl/data",l).then(function(e){p(e)}).catch(function(e){p(e.response)})})},o=function(e,a){return new p.a(function(t,n){Object(s.f)(e,{username:"jinxin",passwd:"jinxin"}).then(function(e){if(void 0===e)throw new Error("token is null");var n=e.data.token;Object(s.e)(a,void 0,n).then(function(e){t(e)}).catch(function(e){t(e.response)})})})},r=function(e,a){return new p.a(function(t,n){var p={action:e,did:a};Object(s.d)("rmm/v1/power/device",p).then(function(e){t(e)}).catch(function(e){t(err.response)})})}},Pg7y:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("KBiF"),p=t("HvBW"),s=t("FMjH"),i=t("yHTr"),l={name:"controlAppcontrol",data:function(){return{activeName:"appaction",startapp:"",stopapp:"",enableapp:"",disableapp:"",appTableData:[],appOptions:[],selectedAgentId:"",selectedDeviceId:"",disableAppArray:s.c,loadingstartapp:!1,loadingstopapp:!1,loadingenableapp:!1,loadingdisableapp:!1,loadingupgradeapp:!1,loadinginstallapp:!1,loadingremoveapp:!1}},components:{selectGroup:p.a},methods:{getSensorStatus:function(){var e=this,a=[],t=[];Object(n.b)(this.selectedDeviceId,s.e,this.selectedAgentId,s.a).then(function(n){Object(i.a)(n,function(n){var p=n.sensorIds[0],s=JSON.parse(p.sv);e.appOptions=s.data;var i=[e.appOptions[0].packageName,e.appOptions[0].packageName,e.appOptions[0].packageName,e.appOptions[0].packageName];e.startapp=i[0],e.stopapp=i[1],e.enableapp=i[2],e.disableapp=i[3],e.appOptions.forEach(function(e){var n={type:"uninstallapp",appname:e.appName,package:e.packageName,versioncode:e.versionCode,version:e.versionName};a.push(n),t.push(n)}),e.getRepoApps(a,t)})})},removeObjInArray:function(e,a){e.forEach(function(t,n){t.package===a&&e.splice(n,1)})},getRepoApps:function(e,a){var t=this,p={},l={};s.f,s.g;Object(n.a)(s.g,s.f).then(function(n){Object(i.a)(n,function(n){if(n.data){var s=[];n.data.forEach(function(n){null!=n.versionName&&n.versionName;p={type:"installapp",appname:n.filename,package:n.pkgname,versioncode:n.versioncode,version:n.versionname},e.push(p),a.forEach(function(a){n.pkgname===a.package&&(n.versioncode>a.versioncode?(void 0===s[n.pkgname]||n.versioncode>s[n.pkgname])&&(s[n.pkgname]=n.versioncode,e.pop(),t.removeObjInArray(e,n.pkgname),l={type:"upgradeapp",appname:a.appname,upgradeapk:n.filename,package:n.pkgname,versioncode:n.versioncode,latestversion:n.versionname,version:a.version},e.push(l)):e.pop())})})}t.appTableData=e})})},setAppSensor:function(e,a){var t=this;if("removeapp"===e||"disableapp"===e||"installapp"===e||"upgradeapp"===e)_g.swalWarnDo(e).then(function(p){p&&(_g.openGlobalLoading(),Object(n.d)(s.b[e],a,t.selectedAgentId,s.a).then(function(a){Object(i.a)(a,function(a){"200"==a.items[0].statusCode&&swal("","success","success").then(function(){"disableapp"!==e&&t.getSensorStatus()})})}))});else{var p="stopapp"===e?s.d:s.a;_g.openGlobalLoading(),Object(n.d)(s.b[e],a,this.selectedAgentId,p).then(function(e){Object(i.a)(e,function(e){"200"==e.items[0].statusCode&&swal("","success","success")})})}},appAction:function(e,a){var t=void 0;if("installapp"===e){var n=a.appname,p=a.package,i=a.version,l="95cbbb6613127668fdd633b2cc006d47";t=s.h+"/"+l+"/"+p+"/"+i+"/"+n}else if("upgradeapp"===e){n=a.upgradeapk,p=a.package,i=a.latestversion,l="95cbbb6613127668fdd633b2cc006d47";t=s.h+"/"+l+"/"+p+"/"+i+"/"+n}else t=a.package;this.setAppSensor(e,t)},getDeviceOption:function(e){this.selectedAgentId=e.value,this.selectedDeviceId=e.key,this.getSensorStatus()}},mounted:function(){}},o={render:function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"subWrapper"},[e._m(0),e._v(" "),n("el-col",{attrs:{span:6}},[n("select-group",{on:{"select-device":e.getDeviceOption}})],1),e._v(" "),n("el-col",{staticClass:"m-t-20",attrs:{span:18}},[n("el-tabs",{model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"App Action",name:"appaction"}},[n("el-form",{staticClass:"m-t-20 m-l-30",attrs:{"label-width":"150px"}},[n("el-form-item",{attrs:{label:"Launch App:"}},[n("el-select",{staticClass:"w-300",attrs:{placeholder:"Please select app",size:"small"},model:{value:e.startapp,callback:function(a){e.startapp=a},expression:"startapp"}},e._l(e.appOptions,function(e){return n("el-option",{key:e.packageName,attrs:{label:e.appName,value:e.packageName}})})),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingstartapp,expression:"loadingstartapp"}],staticClass:"m-l-10",attrs:{type:"primary",size:"small"},on:{click:function(a){e.setAppSensor("startapp",e.startapp)}}},[e._v("\n                            Launch\n                        ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"Stop App:"}},[n("el-select",{staticClass:"w-300",attrs:{placeholder:"Please select app",size:"small"},model:{value:e.stopapp,callback:function(a){e.stopapp=a},expression:"stopapp"}},e._l(e.appOptions,function(e){return n("el-option",{key:e.packageName,attrs:{label:e.appName,value:e.packageName}})})),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingstopapp,expression:"loadingstopapp"}],staticClass:"m-l-10",attrs:{type:"primary",size:"small"},on:{click:function(a){e.setAppSensor("stopapp",e.stopapp)}}},[e._v("\n                            Stop\n                        ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"Enable App:"}},[n("el-select",{staticClass:"w-300",attrs:{placeholder:"Please select app",size:"small"},model:{value:e.enableapp,callback:function(a){e.enableapp=a},expression:"enableapp"}},e._l(e.appOptions,function(e){return n("el-option",{key:e.packageName,attrs:{label:e.appName,value:e.packageName}})})),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingenableapp,expression:"loadingenableapp"}],staticClass:"m-l-10",attrs:{type:"primary",size:"small"},on:{click:function(a){e.setAppSensor("enableapp",e.enableapp)}}},[e._v("\n                            Enable\n                        ")])],1),e._v(" "),n("el-form-item",{attrs:{label:"Disable App:"}},[n("el-select",{staticClass:"w-300",attrs:{placeholder:"Please select app",size:"small"},model:{value:e.disableapp,callback:function(a){e.disableapp=a},expression:"disableapp"}},e._l(e.appOptions,function(e){return n("el-option",{key:e.packageName,attrs:{label:e.appName,value:e.packageName}})})),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingdisableapp,expression:"loadingdisableapp"}],staticClass:"m-l-10",attrs:{type:"primary",size:"small"},on:{click:function(a){e.setAppSensor("disableapp",e.disableapp)}}},[e._v("\n                            Disable\n                        ")])],1)],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"App Market",name:"appmarket"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.appTableData,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{label:"","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("div",[n("img",{attrs:{src:t("CoUN"),alt:"no img"}})])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"appname",label:"App Name","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"package",label:"Package Name","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"version",label:"App Version","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{label:"App Action","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[n("div",[n("span",[n("el-button-group",["uninstallapp"===a.row.type||"upgradeapp"===a.row.type?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingremoveapp,expression:"loadingremoveapp"}],attrs:{size:"small",type:"danger",disabled:e.disableAppArray.indexOf(a.row.package)>=0},on:{click:function(t){e.appAction("removeapp",a.row)}}},[e._v("\n                                            uninstall\n                                         ")]):e._e(),e._v(" "),"upgradeapp"===a.row.type?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingupgradeapp,expression:"loadingupgradeapp"}],attrs:{size:"small",type:"warning",disabled:e.disableAppArray.indexOf(a.row.package)>0},on:{click:function(t){e.appAction("upgradeapp",a.row)}}},[e._v("\n                                            update\n                                        ")]):e._e(),e._v(" "),"installapp"===a.row.type?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadinginstallapp,expression:"loadinginstallapp"}],attrs:{size:"small",type:"primary",disabled:e.disableAppArray.indexOf(a.row.package)>0},on:{click:function(t){e.appAction("installapp",a.row)}}},[e._v("\n                                            install\n                                        ")]):e._e()],1)],1)])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("p",{staticClass:"header-line"},[a("i",{staticClass:"fa fa-android c-blue m-r-10"}),this._v("App Control")])}]};var r=t("C7Lr")(l,o,!1,function(e){t("HYrE")},"data-v-6190790d",null);a.default=r.exports}});
//# sourceMappingURL=4.59589e46648adc5694e9.js.map