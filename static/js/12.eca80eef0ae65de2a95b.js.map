{"version":3,"sources":["webpack:///src/components/device/add.vue","webpack:///./src/components/device/add.vue?d252","webpack:///./src/components/device/add.vue"],"names":["add","name","data","deviceData","deviceList","multipleTable","addLoading","groupOptions","dialogFormVisible","limit","dataCount","currentPage","isshow","form","selectGroup","deviceKeyword","methods","getUnassignedDevices","_this","this","_g","openGlobalLoading","Object","deviceapi","then","handleresponse","res","devices","length","slice","console","log","handleSelectionChange","val","getDeviceGroup","_this2","devicegroupapi","groupData","accounts","groups","groupOptionsData","forEach","push","value","gid","label","selectValue","addDevice","result","swal","router","replace","handleCurrentChange","created","device_add","render","_vm","_h","$createElement","_c","_self","_m","_v","staticClass","attrs","size","placeholder","model","callback","$$v","expression","slot","icon","on","click","staticStyle","width","tooltip-effect","selection-change","type","min-width","prop","directives","rawName","layout","page-size","current-page","total","background","current-change","$event","title","visible","update:visible","$set","_l","item","key","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/12.eca80eef0ae65de2a95b.js","sourcesContent":["<template>\n    <div>\n        <div class=\"m-t-10 \">\n            <p class=\"header-line\">\n                <i class=\"fa fa-plus-square-o c-primary m-r-10\"></i> Add Device\n            </p>\n        </div>\n        <div class=\"m-t-20\">\n            <div class=\"panel-header\">\n                All Unassigned Devices\n                <div class=\"fr m-r-10\"> \n                    <el-input size=\"small\" class=\"w-300 m-l-10\" v-model=\"deviceKeyword\" placeholder=\"Keyword of device name\">\n                        <el-button slot=\"append\" icon=\"el-icon-search\"  @click=\"getUnassignedDevices\" ></el-button>\n                    </el-input>\n                </div>\n            </div>\n\n            <el-table\n                :data=\"deviceList\"\n                tooltip-effect=\"dark\"\n                style=\"width: 100%\"\n                @selection-change=\"handleSelectionChange\">\n\n                <el-table-column\n                type=\"selection\"\n                min-width=\"55\">\n                </el-table-column>\n\n                <el-table-column\n                prop=\"name\"\n                label=\"Device Name\"\n                min-width=\"120\">\n                </el-table-column>\n\n                <el-table-column\n                prop=\"agentId\"\n                label=\"Agent ID\"\n                min-width=\"120\">\n                </el-table-column>\n            </el-table>\n            <div class=\"m-t-10 cf\">\n                <el-pagination class=\"fr\"\n                @current-change=\"handleCurrentChange\"\n                layout=\"prev, pager, next\"\n                :page-size=\"limit\"\n                :current-page=\"currentPage\"\n                :total=\"dataCount\"\n                v-show=\"isshow\"\n                background\n                >\n                </el-pagination> \n            </div>\n            <div  class=\"m-t-10 cf\">\n                <el-button v-loading=\"addLoading\" size=\"small\" @click=\"dialogFormVisible = true\" type=\"primary\" class=\"m-t-10 fr\">Add</el-button>\n                <el-dialog title=\"Select device group you want to add\" :visible.sync=\"dialogFormVisible\">\n                    <el-form :model=\"form\">\n                        <span class=\"m-r-10\">Device Group:</span>\n                        <el-select v-model=\"form.selectGroup\">\n                            <el-option\n                            v-for=\"item in groupOptions\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\">\n                            </el-option>\n                        </el-select>\n                    </el-form>\n                    <div slot=\"footer\" class=\"dialog-footer\">\n                        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"addDevice\">确 定</el-button>\n                    </div>\n                </el-dialog>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {getUnassignedDevicesApi, addDeviceApi} from '../restfulapi/deviceapi'\n    import {getDeviceGroupApi} from '../restfulapi/devicegroupapi'\n    import handleResponse from '../restfulapi/handleresponse'\n\n    export default{\n        name: 'deviceAdd',\n        data(){\n            return {\n                deviceData: [],\n                deviceList: [],\n                multipleTable: [],\n                addLoading: false,\n                groupOptions: [],\n                dialogFormVisible: false,\n                limit: 10,\n                dataCount: null,\n                currentPage: 1,\n                isshow: false,\n                form:{\n                    selectGroup: ''\n                },\n                deviceKeyword: ''\n            }\n        },\n        methods:{\n            \n            getUnassignedDevices(){\n                _g.openGlobalLoading();\n                getUnassignedDevicesApi(this.deviceKeyword).then((data) => {\n                    handleResponse(data, (res) =>{\n                        this.deviceData = res.devices\n                        this.dataCount = res.devices.length;\n                        if(this.dataCount > 0){\n                            this.deviceList = res.devices.slice(0, this.limit);\n                            this.isshow = this.dataCount > this.limit;\n                        }else{\n                            console.log(\"unassigndevicecount is null\")\n                        }\n                    })\n                })\n            },\n\n            handleSelectionChange(val){\n                this.multipleTable = val;\n            },\n\n            getDeviceGroup(){\n                getDeviceGroupApi(this).then((data) => {\n                    handleResponse(data, (res) => {\n                        let groupData = res.accounts[0].groups\n                        console.log(groupData)\n                        if(groupData.length != 0){\n                            let groupOptionsData = [];\n                            groupData.forEach(function(val){\n                                groupOptionsData.push({value: val.gid, label:val.name})\n                            }) \n                            this.selectValue = groupData[0].gid;\n                            this.groupOptions = groupOptionsData\n                        }else{\n                            this.groupOptions = [];\n                        }\n                    })\n                      \n                })\n            },\n\n            addDevice(){\n                this.dialogFormVisible = false;\n                if(this.multipleTable.length == 0){\n                    swal('', 'Please select device', 'warning');\n                    return;\n                }\n                addDeviceApi(this.multipleTable, this.form.selectGroup).then((data) => {\n                    handleResponse(data, (res) => {\n                        if(res.result){\n                            swal(\"\",\"Add device successfully\", 'success').then((val)=>{\n                                if(val){\n                                    router.replace({name: \"deviceList\"})\n                                }\n                            })\n                        }\n                    })\n                })\n            },\n            handleCurrentChange(currentPage){\n                this.currentPage = currentPage;\n                this.deviceList = this.deviceData.slice((currentPage-1)*this.limit,currentPage*this.limit)\n            }\n        },\n\n        created(){\n            this.getUnassignedDevices();\n            this.getDeviceGroup();\n        },\n    }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/device/add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"m-t-20\"},[_c('div',{staticClass:\"panel-header\"},[_vm._v(\"\\n            All Unassigned Devices\\n            \"),_c('div',{staticClass:\"fr m-r-10\"},[_c('el-input',{staticClass:\"w-300 m-l-10\",attrs:{\"size\":\"small\",\"placeholder\":\"Keyword of device name\"},model:{value:(_vm.deviceKeyword),callback:function ($$v) {_vm.deviceKeyword=$$v},expression:\"deviceKeyword\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUnassignedDevices},slot:\"append\"})],1)],1)]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.deviceList,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"min-width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"Device Name\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"agentId\",\"label\":\"Agent ID\",\"min-width\":\"120\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-t-10 cf\"},[_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isshow),expression:\"isshow\"}],staticClass:\"fr\",attrs:{\"layout\":\"prev, pager, next\",\"page-size\":_vm.limit,\"current-page\":_vm.currentPage,\"total\":_vm.dataCount,\"background\":\"\"},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-t-10 cf\"},[_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.addLoading),expression:\"addLoading\"}],staticClass:\"m-t-10 fr\",attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"Add\")]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"Select device group you want to add\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('span',{staticClass:\"m-r-10\"},[_vm._v(\"Device Group:\")]),_vm._v(\" \"),_c('el-select',{model:{value:(_vm.form.selectGroup),callback:function ($$v) {_vm.$set(_vm.form, \"selectGroup\", $$v)},expression:\"form.selectGroup\"}},_vm._l((_vm.groupOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDevice}},[_vm._v(\"确 定\")])],1)],1)],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-t-10 \"},[_c('p',{staticClass:\"header-line\"},[_c('i',{staticClass:\"fa fa-plus-square-o c-primary m-r-10\"}),_vm._v(\" Add Device\\n        \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5aa02bff\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/device/add.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5aa02bff\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/device/add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}