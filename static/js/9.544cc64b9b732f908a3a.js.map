{"version":3,"sources":["webpack:///src/common/btn-group.vue","webpack:///./src/common/btn-group.vue?324b","webpack:///src/components/message/list.vue","webpack:///./src/common/btn-group.vue","webpack:///./src/components/restfulapi/msgapi.js","webpack:///./src/components/message/list.vue?e349","webpack:///./src/components/message/list.vue"],"names":["btn_group","props","selectedData","type","Array","default","delurl","String","isAdd","Boolean","isDelete","data","addLoading","deleteLoading","methods","addDevice","this","$route","path","substring","lastIndexOf","addpath","console","log","router","replace","DeleteDevice","_this","dddata","devices","forEach","value","i","did","groupIds","apiPost","then","handleResponse","res","result","swal","_g","shallowRefresh","name","common_btn_group","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","attrs","size","on","click","$event","_v","_e","staticRenderFns","list","__webpack_require__","normalizeComponent","messageList","msgTableData","multipleTable","limit","categoryValue","isshow","groupValue","severityValue","dataCount","currentPage","groupOptions","categoryOptions","severityOptions","label","getDeviceGroup","Object","devicegroupapi","handleresponse","groupData","accounts","groups","length","groupOptionsData","val","push","gid","$nextTick","getEventMessages","getDeviceCategory","_this2","promise_default","a","resolve","reject","categoryData","_","Date","getTime","apiGet","catch","err","response","catopts","catObj","tag","toLowerCase","Description","confirmDelete","row","swalWarningDo","willDelete","DeleteMsgApi","id","handleSelectionChange","handleCurrentChange","slice","_this3","openGlobalLoading","getUserAidApi","accountId","aid","eventMsgData","severity","groupId","beginTs","getFromNowTimes","endTs","orderType","category","amount","events","created","message_list","_m","staticClass","change","model","callback","$$v","_l","item","key","staticStyle","width","tooltip-effect","selection-change","prop","min-width","sortable","scopedSlots","_u","fn","scope","_s","_f","unix_ts","class","padding","border-radius","subtype","layout","page-size","current-page","total","background","current-change","aria-hidden","list_Component","list_normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.544cc64b9b732f908a3a.js","sourcesContent":["<template>\n    <div>\n        <el-button v-loading=\"addLoading\" size=\"small\" @click=\"addDevice()\" v-if=isAdd type=\"primary\">Add</el-button>\n        <el-button v-loading=\"deleteLoading\" size=\"small\" @click=\"DeleteDevice()\" v-if=isDelete type=\"primary\">Delete</el-button>\n    </div>\n</template>\n\n<script>\n    export default{\n        props: {\n            selectedData:{\n                type: [Array, null],\n                default:function(){\n                    return [];\n                }\n            },\n            delurl: {\n                type: String,\n                default: ''\n            },\n            isAdd: {\n                default: false,\n                type: Boolean,\n            },\n            isDelete: {\n                default: false,\n                type: Boolean,\n            },\n        },\n        data(){\n            return {\n                addLoading: false,\n                deleteLoading: false\n            }\n        },\n        methods:{\n            addDevice(){\n                var typepath = this.$route.path.substring(this.$route.path.lastIndexOf(\"/\")+1);\n\n                let addpath = this.$route.path.substring(0,this.$route.path.lastIndexOf(\"/\")+1)+\"add\";\n                console.log(addpath);\n                router.replace(addpath)\n            },\n\n            DeleteDevice(){\n                if(!this.selectedData){\n                    swal(\"\",\"Please selected data\",\"info\")\n                    return;\n                }\n                this.addLoading = !this.addLoading;\n                var dddata = {};\n                dddata.devices = [];\n\n                selectedData.forEach((value) => {\n                    dddata.devices[i] = {\"did\": value, \"groupIds\":[]};   \n                })\n                this.apiPost(delurl,  dddata).then((data) => {\n                    this.handleResponse(data, (res)=>{\n                        if(data.result){\n                            swal(\"\", \"Delete successfully\", \"success\").then(() => {\n                                _g.shallowRefresh(this.$route.name);\n                            })\n                        }else{\n                            this.deleteLoading = !deleteLoading;\n                        }\n                    })\n                    \n                })\n            },\n\n\n        }\n    }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/common/btn-group.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isAdd)?_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.addLoading),expression:\"addLoading\"}],attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDevice()}}},[_vm._v(\"Add\")]):_vm._e(),_vm._v(\" \"),(_vm.isDelete)?_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.deleteLoading),expression:\"deleteLoading\"}],attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.DeleteDevice()}}},[_vm._v(\"Delete\")]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-31ae6a66\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/common/btn-group.vue\n// module id = null\n// module chunks = ","<template>\n    <div>\n        <div class=\"m-t-10 \">\n            <p class=\"header-line\"><i class=\"fa fa-info c-primary m-r-10\" aria-hidden=\"true\"></i>Message </p>\n        </div>\n        <div class=\"m-t-20\">\n            <div class=\"panel-header\">\n                Severity:\n                <el-select v-model=\"severityValue\" size=\"small\" @change=\"getEventMessages\">\n                    <el-option\n                    v-for=\"item in severityOptions\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\">\n                    </el-option>\n                </el-select>\n                Category:\n                <el-select v-model=\"categoryValue\" size=\"small\" @change=\"getEventMessages\">\n                    <el-option\n                    v-for=\"item in categoryOptions\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\">\n                    </el-option>\n                </el-select>\n                 Device Group:\n                <el-select v-model=\"groupValue\" size=\"small\" @change=\"getEventMessages\">\n                    <el-option\n                    v-for=\"item in groupOptions\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\">\n                    </el-option>\n                </el-select>\n                \n                <!-- <div class=\"fr m-r-10\"> \n                    <el-input size=\"small\" class=\"w-300 m-l-10 m-b-5\" v-model=\"groupKeyword\" placeholder=\"Please input keyword of device\">\n                        <el-button slot=\"append\" icon=\"el-icon-search\"  @click=\"getDeviceGroup\" ></el-button>\n                    </el-input>\n                </div> -->\n            </div>\n            \n            <el-table\n                :data=\"messageList\"\n                tooltip-effect=\"dark\"\n                style=\"width: 100%\"\n                @selection-change=\"handleSelectionChange\"\n                >\n\n                <el-table-column\n                label=\"Time Stamp\"\n                prop=\"name\"\n                min-width=\"120\"\n                sortable>\n                     <template slot-scope=\"scope\">\n                        <div>\n                            {{scope.row.unix_ts|time}}\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column\n                label=\"Device Name\"\n                prop=\"agent_name\"\n                min-width=\"120\"\n                sortable>\n                </el-table-column>\n                <el-table-column\n                label=\"Severify\"\n                min-width=\"120\">\n                    <template slot-scope=\"scope\">\n                        <div>\n                            <span style=\"padding: 5px; border-radius: 3px; border-radius: 5px\" :class=\"[scope.row.severity =='Error'? 'bg-red': scope.row.severity == 'Warning'? 'bg-yellow' :'bg-green']\">\n                                {{scope.row.severity}}\n                            </span>\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column\n                label=\"Subtype\"\n                min-width=\"120\"\n                sortable>\n                    <template slot-scope=\"scope\">\n                        <div>\n                            {{scope.row.subtype.toLowerCase()}}\n                        </div>\n                    </template>\n                </el-table-column>\n                <el-table-column\n                label=\"Event Message\"\n                prop=\"message\"\n                min-width=\"120\"\n                sortable>\n                </el-table-column>\n                <el-table-column\n                label=\"Action\"\n                min-width=\"120\">\n                    <template slot-scope=\"scope\">\n                        <div>\n                            <span>\n                                <el-button size=\"small\" type=\"danger\" @click=\"confirmDelete(scope.row)\">Delete</el-button>\n                            </span>\n                        </div>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"m-t-10 cf\">\n                <el-pagination class=\"fr\"\n                @current-change=\"handleCurrentChange\"\n                layout=\"prev, pager, next\"\n                :page-size=\"limit\"\n                :current-page=\"currentPage\"\n                :total=\"dataCount\"\n                v-show=\"isshow\"\n                background\n                >\n                </el-pagination>\n                \n            </div>\n\n        </div>\n    </div>  \n</template>\n\n<script>\n    import {getDeviceGroupApi} from '../restfulapi/devicegroupapi'\n    import {getDeviceCategoryApi, getEventMsgApi, deleteMsgApi} from '../restfulapi/msgapi'\n    import handleResponse from '../restfulapi/handleresponse'\n    import btnGroup from '@/common/btn-group'\n    export default{\n        name: 'messageList',\n        data(){\n            return{\n                messageList:[],\n                msgTableData:[],\n                multipleTable:[],\n                limit: 10,\n                categoryValue:'',\n                isshow: false,\n                groupValue: '',\n                severityValue: 'All',\n                dataCount: null,\n                currentPage: 1,\n                groupOptions: [],\n                categoryOptions: [],\n                severityOptions: [\n                    {value: \"All\", label: \"All\"},\n                    {value: \"Information\", label: \"Information\"},\n                    {value: \"Warning\", label: \"Warning\"},\n                    {value: \"Error\", label: \"Error\"}\n                ],\n\n            }\n        },\n   \n\n        methods:{\n            getDeviceGroup(){\n                getDeviceGroupApi().then((data) => {\n                    handleResponse(data, (res) => {\n                        let groupData = res.accounts[0].groups\n                        console.log(groupData)\n                        if(groupData.length != 0){\n                            let groupOptionsData = [];\n                            groupData.forEach(function(val){\n                                groupOptionsData.push({value: val.gid, label:val.name})\n                            }) \n                            this.groupValue = groupData[0].gid;\n                            this.groupOptions = groupOptionsData\n                        }else{\n                            this.groupOptions = [];\n                        }\n                        this.$nextTick(function () {\n                            this.getEventMessages();\n                        })\n                    })\n                })\n            },\n\n            getDeviceCategory(){\n                getDeviceCategoryApi().then((data) => {\n                    handleResponse(data, (res)=> {\n                        if(!data.result){\n                            let catopts=[];\n                            res.result.forEach(function(catObj){\n                                catopts.push({value: catObj.tag.toLowerCase(), label: catObj.Description}) \n                            })\n                            this.categoryValue = res.result[0].tag.toLowerCase();\n                            this.categoryOptions = catopts;\n                        }else{\n                            this.categoryOptions = [];\n                        }\n                        this.$nextTick(function () {\n                            this.getEventMessages();\n                        })\n                    })\n                   \n                })\n            },\n\n            confirmDelete(row){ \n                _g.swalWarningDo(\"delete this message\").then((willDelete) => {\n                    if(willDelete){\n                       DeleteMsgApi(row.id).then((data) => {\n                            handleResponse(data, (res) => {\n                                if(res.result){\n                                    swal(\"\",\"Delete Message successfully\",'success').then(() => {\n                                        getEventMessages();\n                                    })\n                                }\n                            })\n                        })\n                    }\n                })\n                \n                \n            },\n\n            handleSelectionChange(val){\n                this.multipleTable = val;\n            },\n\n            handleCurrentChange(currentPage){\n                this.currentPage = currentPage;\n                this.messageList = this.msgTableData.slice((currentPage-1)*this.limit,currentPage*this.limit)\n            },\n\n            getEventMessages(){\n                if(this.severityValue == '' || this.groupValue == '' || this.categoryValue == ''){\n                    return;\n                }\n                _g.openGlobalLoading();\n                getEventMsgApi(this.severityValue, this.groupValue, this.categoryValue).then((data) => {\n                    handleResponse(data, (res) =>{\n                        this.msgTableData = res.events;\n                        this.dataCount = this.msgTableData.length;\n                        this.messageList = this.msgTableData.slice(0,this.limit)\n                        this.isshow = this.dataCount > this.limit;\n                    })\n                   \n                })\n                \n            },\n        },\n        created(){\n            this.getDeviceGroup();\n            this.getDeviceCategory();\n        },\n    }\n</script>\n<style lang='scss' scoped>\n    .btn-group{\n        color:#428bca;\n    }\n    .text {\n    font-size: 14px;\n    }\n\n    .item {\n    margin-bottom: 18px;\n    }\n    .demo-table-expand {\n        font-size: 0;\n    }\n    .demo-table-expand label {\n        width: 90px;\n        color: #99a9bf;\n    }\n    .demo-table-expand .el-form-item {\n        margin-right: 0;\n        margin-bottom: 0;\n        width: 50%;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/message/list.vue","var normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./btn-group.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./btn-group.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-31ae6a66\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./btn-group.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/common/btn-group.vue\n// module id = null\n// module chunks = ","import {apiGet, apiDelete} from \"../../assets/js/baseapi\";\nimport {getUserAidApi} from \"./userinfoapi\";\nimport handleResponse from \"../restfulapi/handleresponse\"\n\n\nlet getDeviceCategoryApi = function(){\n    return new Promise((resolve, reject) => {\n        var categoryData = {\n            type: \"Device\",\n            _: new Date().getTime()\n        };\n\n        apiGet(\"rmm/v1/notifymgmt/category\", categoryData).then((data) => {\n            resolve(data);\n        }).catch((err) => {\n            resolve(err.response);\n        })\n    }) \n}\n\nlet deleteMsgApi = function(gid){ \n    return new Promise((resolve, reject) => {\n        apiDelete('rmm/v1/devicegroups/'+gid).then((data) => {\n            resolve(data);\n        }).catch((err) => {\n            resolve(err.response);\n        })\n    }) \n}\n\nlet getEventMsgApi = function(severityValue, groupValue, categoryValue){\n    return new Promise((resolve, reject) => {\n        getUserAidApi().then((data) =>{\n            handleResponse(data, (res) => {\n                let accountId = res.accounts[0].aid;\n                var eventMsgData = {\n                    severity: severityValue,\n                    groupId: groupValue,\n                    accountId: accountId,\n                    beginTs: _g.getFromNowTimes(7, 0),\n                    endTs:  _g.getFromNowTimes(0, 0),\n                    orderType: \"desc\",\n                    category:  categoryValue,\n                    amount:  20,\n                    _: new Date().getTime(),\n                };\n                apiGet(\"rmm/v1/events/devices\", eventMsgData).then((data) => {\n                    resolve(data);\n                }).catch((err) => {\n                    resolve(err.response);\n                })\n            })\n        })\n    })\n}\n\n\nexport {\n    getDeviceCategoryApi,\n    deleteMsgApi,\n    getEventMsgApi\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/restfulapi/msgapi.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"m-t-20\"},[_c('div',{staticClass:\"panel-header\"},[_vm._v(\"\\n            Severity:\\n            \"),_c('el-select',{attrs:{\"size\":\"small\"},on:{\"change\":_vm.getEventMessages},model:{value:(_vm.severityValue),callback:function ($$v) {_vm.severityValue=$$v},expression:\"severityValue\"}},_vm._l((_vm.severityOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})),_vm._v(\"\\n            Category:\\n            \"),_c('el-select',{attrs:{\"size\":\"small\"},on:{\"change\":_vm.getEventMessages},model:{value:(_vm.categoryValue),callback:function ($$v) {_vm.categoryValue=$$v},expression:\"categoryValue\"}},_vm._l((_vm.categoryOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})),_vm._v(\"\\n             Device Group:\\n            \"),_c('el-select',{attrs:{\"size\":\"small\"},on:{\"change\":_vm.getEventMessages},model:{value:(_vm.groupValue),callback:function ($$v) {_vm.groupValue=$$v},expression:\"groupValue\"}},_vm._l((_vm.groupOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.messageList,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"label\":\"Time Stamp\",\"prop\":\"name\",\"min-width\":\"120\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"\\n                        \"+_vm._s(_vm._f(\"time\")(scope.row.unix_ts))+\"\\n                    \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Device Name\",\"prop\":\"agent_name\",\"min-width\":\"120\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Severify\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('span',{class:[scope.row.severity =='Error'? 'bg-red': scope.row.severity == 'Warning'? 'bg-yellow' :'bg-green'],staticStyle:{\"padding\":\"5px\",\"border-radius\":\"5px\"}},[_vm._v(\"\\n                            \"+_vm._s(scope.row.severity)+\"\\n                        \")])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Subtype\",\"min-width\":\"120\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"\\n                        \"+_vm._s(scope.row.subtype.toLowerCase())+\"\\n                    \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Event Message\",\"prop\":\"message\",\"min-width\":\"120\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Action\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('span',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.confirmDelete(scope.row)}}},[_vm._v(\"Delete\")])],1)])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-t-10 cf\"},[_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isshow),expression:\"isshow\"}],staticClass:\"fr\",attrs:{\"layout\":\"prev, pager, next\",\"page-size\":_vm.limit,\"current-page\":_vm.currentPage,\"total\":_vm.dataCount,\"background\":\"\"},on:{\"current-change\":_vm.handleCurrentChange}})],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-t-10 \"},[_c('p',{staticClass:\"header-line\"},[_c('i',{staticClass:\"fa fa-info c-primary m-r-10\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\"Message \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-39563e71\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/message/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-39563e71\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-39563e71\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-39563e71\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/message/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}